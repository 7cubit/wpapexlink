"use strict";(globalThis.webpackChunkwp_apexlink=globalThis.webpackChunkwp_apexlink||[]).push([[592],{16592(e,t,a){a.r(t),a.d(t,{default:()=>h});var n=a(51609),l=a(27723),r=a(86087),s=a(97665),i=a(33930),o=a(57097),c=a(46858),d=a(8723),m=a(85731),p=a(44471);const x=(0,a(4485).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var g=a(80964),u=a(32708),y=a(97213),b=a(37946),w=a(90888);const h=({darkMode:e})=>{const t=(0,s.jE)(),[a,h]=(0,r.useState)(!1),[f,k]=(0,r.useState)({keyword:"",target_id:"",match_type:"exact"}),[v,N]=(0,r.useState)(null),[E,_]=(0,r.useState)(3),[A,C]=(0,r.useState)(85),j=window.wpApexLinkData?.apiUrl||"/wp-json/apexlink/v1",{data:P,isLoading:S}=(0,i.I)({queryKey:["autopilot-rules"],queryFn:async()=>(await fetch(`${j}/autopilot/rules`,{headers:{"X-WP-Nonce":window.wpApexLinkData?.nonce}})).json()}),L=(0,o.n)({mutationFn:async e=>(await fetch(`${j}/autopilot/rules`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpApexLinkData?.nonce},body:JSON.stringify(e)})).json(),onSuccess:()=>{t.invalidateQueries(["autopilot-rules"]),h(!1),k({keyword:"",target_id:"",match_type:"exact"}),w.Ay.success((0,l.__)("Rule created successfully!","wp-apexlink"))}}),T=(0,o.n)({mutationFn:async e=>(await fetch(`${j}/autopilot/rules/${e}`,{method:"DELETE",headers:{"X-WP-Nonce":window.wpApexLinkData?.nonce}})).json(),onSuccess:()=>{t.invalidateQueries(["autopilot-rules"]),w.Ay.success((0,l.__)("Rule removed.","wp-apexlink"))}}),R=(0,o.n)({mutationFn:async(e=!1)=>(await fetch(`${j}/autopilot/run`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpApexLinkData?.nonce},body:JSON.stringify({simulation:e,max_links_per_post:E,min_confidence:A})})).json(),onSuccess:e=>{e.is_simulation?(N(e.results||[]),w.Ay.success((0,l.sprintf)((0,l.__)("%d simulated links found!","wp-apexlink"),e.found_count))):w.Ay.success((0,l.__)("Autopilot job dispatched to background!","wp-apexlink"),{icon:"ðŸš€"})}}),M=(0,o.n)({mutationFn:async()=>(await fetch(`${j}/autopilot/commit`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpApexLinkData?.nonce},body:JSON.stringify({links:v})})).json(),onSuccess:e=>{w.Ay.success(e.message),N(null),t.invalidateQueries(["suggestions"])}}),D=(0,o.n)({mutationFn:async()=>(await fetch(`${j}/autopilot/revert`,{method:"POST",headers:{"X-WP-Nonce":window.wpApexLinkData?.nonce}})).json(),onSuccess:e=>{e.success?(w.Ay.success((0,l.__)("Batch reverted!","wp-apexlink")+` (${e.reverted_count} links)`,{icon:"âª"}),t.invalidateQueries(["suggestions"])):w.Ay.error(e.message||(0,l.__)("Failed to revert.","wp-apexlink"))}});return(0,n.createElement)("div",{className:"max-w-6xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500"},(0,n.createElement)("div",{className:"p-8 rounded-3xl border "+(e?"bg-gradient-to-br from-indigo-900/40 to-purple-900/40 border-indigo-500/30":"bg-gradient-to-br from-indigo-50 to-purple-50 border-indigo-100 shadow-sm")},(0,n.createElement)("div",{className:"flex items-center justify-between"},(0,n.createElement)("div",{className:"space-y-2"},(0,n.createElement)("div",{className:"flex items-center space-x-3"},(0,n.createElement)("div",{className:"p-2 bg-indigo-500 rounded-lg"},(0,n.createElement)(c.A,{className:"w-6 h-6 text-white"})),(0,n.createElement)("h2",{className:"text-3xl font-black "+(e?"text-white":"text-gray-900")},(0,l.__)("Autopilot","wp-apexlink"))),(0,n.createElement)("p",{className:"text-lg "+(e?"text-indigo-200/70":"text-indigo-600")},(0,l.__)("Automate your internal linking strategy with keyword-based rules.","wp-apexlink"))),(0,n.createElement)("div",{className:"flex gap-4"},v?(0,n.createElement)("button",{onClick:()=>N(null),className:"px-6 py-3 rounded-2xl font-bold text-sm transition-all border "+(e?"border-gray-700 text-gray-400":"border-gray-200 text-gray-500")},(0,l.__)("Cancel Simulation","wp-apexlink")):(0,n.createElement)("button",{onClick:()=>R.mutate(!0),disabled:R.isPending,className:"flex items-center px-6 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white font-bold rounded-2xl transition-all shadow-lg hover:shadow-indigo-500/20 active:scale-95"},R.isPending?(0,n.createElement)(d.A,{className:"w-5 h-5 mr-2 animate-spin"}):(0,n.createElement)(m.A,{className:"w-5 h-5 mr-2 fill-current"}),(0,l.__)("Run Simulation","wp-apexlink"))))),v&&(0,n.createElement)("div",{className:"mb-12 animate-in slide-in-from-top-4 duration-500"},(0,n.createElement)("div",{className:"p-8 rounded-3xl border-2 border-dashed relative overflow-hidden "+(e?"bg-indigo-950/20 border-indigo-500/30":"bg-indigo-50/50 border-indigo-200")},(0,n.createElement)("div",{className:"relative z-10"},(0,n.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,n.createElement)("div",null,(0,n.createElement)("h3",{className:"text-xl font-black "+(e?"text-white":"text-indigo-900")},(0,l.__)("Simulation Report","wp-apexlink")),(0,n.createElement)("p",{className:"text-sm text-indigo-500 font-bold"},(0,l.sprintf)((0,l.__)("%d potential links discovered.","wp-apexlink"),v.length))),(0,n.createElement)("button",{onClick:()=>M.mutate(),disabled:M.isPending,className:"px-8 py-3 bg-emerald-500 hover:bg-emerald-600 text-white font-black rounded-2xl shadow-xl shadow-emerald-500/20 flex items-center"},M.isPending?(0,n.createElement)(d.A,{className:"w-4 h-4 mr-2 animate-spin"}):(0,n.createElement)(p.A,{className:"w-4 h-4 mr-2"}),(0,l.__)("Commit to Inbox","wp-apexlink"))),(0,n.createElement)("div",{className:"grid grid-cols-1 gap-3 max-h-[300px] overflow-y-auto pr-2"},v.map((t,a)=>(0,n.createElement)("div",{key:a,className:"p-4 rounded-xl border flex items-center justify-between "+(e?"bg-gray-900/50 border-gray-700 text-gray-300":"bg-white border-indigo-50 text-gray-700")},(0,n.createElement)("div",{className:"flex-1 truncate pr-4 text-xs"},(0,n.createElement)("span",{className:"font-bold italic"},'"',t.anchor,'"'),(0,n.createElement)("span",{className:"mx-2 text-gray-500"},"â†’"),(0,n.createElement)("span",{className:"font-bold opacity-80"},t.target_title)),(0,n.createElement)("div",{className:"px-2 py-0.5 bg-emerald-500/10 text-emerald-500 rounded-full text-[10px] font-black uppercase tracking-widest"},(0,l.__)("Ready","wp-apexlink")))))))),(0,n.createElement)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8"},(0,n.createElement)("div",{className:"lg:col-span-2 space-y-4"},(0,n.createElement)("div",{className:"flex items-center justify-between"},(0,n.createElement)("h3",{className:"font-bold text-xl px-2 "+(e?"text-gray-200":"text-gray-800")},(0,l.__)("Active Rules","wp-apexlink")),(0,n.createElement)("button",{onClick:()=>h(!0),className:"flex items-center text-sm font-bold text-indigo-500 hover:text-indigo-600 bg-indigo-500/10 px-4 py-2 rounded-xl transition-colors"},(0,n.createElement)(x,{className:"w-4 h-4 mr-2"}),(0,l.__)("New Rule","wp-apexlink"))),(0,n.createElement)("div",{className:"rounded-2xl border overflow-hidden "+(e?"bg-gray-800 border-gray-700":"bg-white border-gray-100 shadow-sm")},S?(0,n.createElement)("div",{className:"p-12 text-center text-gray-400"},(0,n.createElement)(d.A,{className:"w-8 h-8 animate-spin mx-auto mb-2"}),(0,l.__)("Loading rules...","wp-apexlink")):0===P?.length?(0,n.createElement)("div",{className:"p-12 text-center space-y-4"},(0,n.createElement)("div",{className:"p-4 bg-gray-500/10 w-fit mx-auto rounded-full"},(0,n.createElement)(g.A,{className:"w-8 h-8 text-gray-400"})),(0,n.createElement)("div",{className:"space-y-1"},(0,n.createElement)("p",{className:"font-bold "+(e?"text-gray-300":"text-gray-600")},(0,l.__)("No active rules found","wp-apexlink")),(0,n.createElement)("p",{className:"text-sm text-gray-500"},(0,l.__)("Create your first rule to start automating internal links.","wp-apexlink")))):(0,n.createElement)("div",{className:"divide-y divide-gray-100 dark:divide-gray-700"},P?.map(t=>(0,n.createElement)("div",{key:t.id,className:"p-4 flex items-center justify-between hover:bg-gray-50/50 dark:hover:bg-gray-700/30 transition-colors"},(0,n.createElement)("div",{className:"flex items-center space-x-4"},(0,n.createElement)("div",{className:"w-10 h-10 rounded-xl bg-indigo-500/10 flex items-center justify-center text-indigo-500 font-bold"},t.keyword.charAt(0).toUpperCase()),(0,n.createElement)("div",null,(0,n.createElement)("p",{className:"font-bold "+(e?"text-gray-100":"text-gray-900")},t.keyword),(0,n.createElement)("p",{className:"text-xs text-gray-500"},(0,l.__)("Links to Post ID:","wp-apexlink")," ",(0,n.createElement)("span",{className:"font-mono"},t.target_id)))),(0,n.createElement)("div",{className:"flex items-center space-x-2"},(0,n.createElement)("span",{className:"px-2 py-1 rounded-md text-[10px] font-bold uppercase "+("active"===t.status?"bg-green-500/10 text-green-500":"bg-gray-500/10 text-gray-500")},t.status),(0,n.createElement)("button",{onClick:()=>T.mutate(t.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-all"},(0,n.createElement)(u.A,{className:"w-4 h-4"})))))))),(0,n.createElement)("div",{className:"space-y-6"},(0,n.createElement)("h3",{className:"font-bold text-xl px-2 "+(e?"text-gray-200":"text-gray-800")},(0,l.__)("Run Constraints","wp-apexlink")),(0,n.createElement)("div",{className:"p-6 rounded-2xl border space-y-6 "+(e?"bg-gray-800 border-gray-700":"bg-white border-gray-100 shadow-sm")},(0,n.createElement)("div",{className:"space-y-3"},(0,n.createElement)("div",{className:"flex items-center justify-between"},(0,n.createElement)("label",{className:"text-sm font-bold "+(e?"text-gray-300":"text-gray-600")},(0,l.__)("Max Links Per Post","wp-apexlink")),(0,n.createElement)("span",{className:"text-indigo-500 font-bold text-sm"},E)),(0,n.createElement)("input",{type:"range",min:"1",max:"10",value:E,onChange:e=>_(parseInt(e.target.value)),className:"w-full accent-indigo-500"})),(0,n.createElement)("div",{className:"space-y-3"},(0,n.createElement)("div",{className:"flex items-center justify-between"},(0,n.createElement)("label",{className:"text-sm font-bold "+(e?"text-gray-300":"text-gray-600")},(0,l.__)("Min Confidence","wp-apexlink")),(0,n.createElement)("span",{className:"text-indigo-500 font-bold text-sm"},A,"%")),(0,n.createElement)("input",{type:"range",min:"50",max:"100",value:A,onChange:e=>C(parseInt(e.target.value)),className:"w-full accent-indigo-500"})),(0,n.createElement)("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700"},(0,n.createElement)("div",{className:"flex items-start space-x-3 text-xs text-gray-500 leading-relaxed italic"},(0,n.createElement)(y.A,{className:"w-4 h-4 shrink-0 mt-0.5"}),(0,n.createElement)("p",null,(0,l.__)("Autopilot runs in the background. Matches will appear in your Suggestions Inbox for final review.","wp-apexlink"))))),(0,n.createElement)("div",{className:"p-6 rounded-2xl border "+(e?"bg-red-500/5 border-red-500/20":"bg-red-50 border-red-100")},(0,n.createElement)("div",{className:"flex items-center space-x-3 mb-3"},(0,n.createElement)(b.A,{className:"w-5 h-5 text-red-500"}),(0,n.createElement)("h4",{className:"font-bold text-red-500"},(0,l.__)("Emergency Revert","wp-apexlink"))),(0,n.createElement)("p",{className:"text-xs text-red-600/70 mb-4 leading-relaxed"},(0,l.__)("Immediately batch-remove all links injected by the last autopilot session.","wp-apexlink")),(0,n.createElement)("button",{onClick:()=>{window.confirm((0,l.__)("Are you sure you want to revert the last autopilot batch?","wp-apexlink"))&&D.mutate()},disabled:D.isPending,className:"w-full py-2 bg-red-500 hover:bg-red-600 disabled:bg-red-400 text-white font-bold rounded-xl transition-all shadow-lg shadow-red-500/20 active:scale-95 text-sm flex items-center justify-center"},D.isPending&&(0,n.createElement)(d.A,{className:"w-4 h-4 mr-2 animate-spin"}),(0,l.__)("Revert Last Batch","wp-apexlink"))))),a&&(0,n.createElement)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4"},(0,n.createElement)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>h(!1)}),(0,n.createElement)("div",{className:"relative w-full max-w-md p-8 rounded-3xl border animate-in zoom-in-95 duration-200 "+(e?"bg-gray-800 border-gray-700":"bg-white border-gray-100 shadow-2xl")},(0,n.createElement)("h4",{className:"text-2xl font-black mb-6 "+(e?"text-white":"text-gray-900")},(0,l.__)("Add Linking Rule","wp-apexlink")),(0,n.createElement)("div",{className:"space-y-4"},(0,n.createElement)("div",{className:"space-y-2"},(0,n.createElement)("label",{className:"text-xs font-bold uppercase tracking-wider text-gray-400"},(0,l.__)("Keyword / Anchor Text","wp-apexlink")),(0,n.createElement)("input",{type:"text",placeholder:"e.g. 'internal linking'",className:"w-full px-4 py-3 rounded-xl border outline-none focus:ring-2 focus:ring-indigo-500 "+(e?"bg-gray-900 border-gray-700 text-white":"bg-gray-50 border-gray-200"),value:f.keyword,onChange:e=>k({...f,keyword:e.target.value})})),(0,n.createElement)("div",{className:"space-y-2"},(0,n.createElement)("label",{className:"text-xs font-bold uppercase tracking-wider text-gray-400"},(0,l.__)("Target Post ID","wp-apexlink")),(0,n.createElement)("input",{type:"number",placeholder:"123",className:"w-full px-4 py-3 rounded-xl border outline-none focus:ring-2 focus:ring-indigo-500 "+(e?"bg-gray-900 border-gray-700 text-white":"bg-gray-50 border-gray-200"),value:f.target_id,onChange:e=>k({...f,target_id:e.target.value})})),(0,n.createElement)("div",{className:"pt-4 flex space-x-3"},(0,n.createElement)("button",{onClick:()=>h(!1),className:"flex-1 py-3 font-bold rounded-2xl transition-all "+(e?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200")},(0,l.__)("Cancel","wp-apexlink")),(0,n.createElement)("button",{onClick:()=>L.mutate(f),className:"flex-1 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-2xl transition-all shadow-lg active:scale-95"},(0,l.__)("Create Rule","wp-apexlink")))))))}},32708(e,t,a){a.d(t,{A:()=>n});const n=(0,a(4485).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},85731(e,t,a){a.d(t,{A:()=>n});const n=(0,a(4485).A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},97213(e,t,a){a.d(t,{A:()=>n});const n=(0,a(4485).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])}}]);